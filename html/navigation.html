<header class="main-header">
    <div class="header-top">
        <div class="header-left-group">
            <button id="menu-toggle-btn" class="header-btn"><i class="fas fa-bars"></i></button>
            <a href="main_page_tours.html" class="header-title">FridgeTrotter</a>
        </div>
        <div class="header-right-group">
            <button id="notifications-btn" class="header-btn">
                <i class="far fa-bell"></i>
                <span class="badge-dot"></span>
            </button>
            <a href="chat.html" class="header-btn"><i class="far fa-comments"></i></a>
            <a href="my_profile.html" class="header-btn"><i class="far fa-user"></i></a>
        </div>
    </div>
    <div class="header-nav-row">
        <div class="nav-container">
            <a href="main_page_tours.html" class="nav-tab" data-page="tours">Тури</a>
            <a href="forum.html" class="nav-tab" data-page="forum">Форум</a>
            <a href="companions.html" class="nav-tab" data-page="companions">Пошук компанії</a>
        </div>
    </div>
</header>

<div id="sidebar-overlay" class="sidebar-overlay"></div>

<div id="sidebar" class="sidebar">
    <div class="sidebar-header">
        <h2 class="text-2xl font-normal">Меню</h2>
        <button id="sidebar-close-btn" class="sidebar-close-btn"><i class="fas fa-times"></i></button>
    </div>

    <nav class="sidebar-nav">
        <ul class="sidebar-menu-group">
            <li><a href="main_page_tours.html" class="sidebar-link"><i class="fas fa-home"></i> Головна</a></li>
            <li><a href="my_profile.html" class="sidebar-link"><i class="far fa-user"></i> Мій профіль</a></li>
            <li><button id="agent-mode-btn" class="sidebar-link"><i class="fas fa-briefcase"></i> Режим турагента</button></li>
        </ul>

        <div class="sidebar-separator"></div>

        <ul class="sidebar-menu-group">
            <!-- Ця кнопка тепер виконує подвійну роль: Вхід/Реєстрація АБО Вихід -->
            <li><button id="auth-btn" class="sidebar-link"><i class="fas fa-sign-in-alt"></i> Реєстрація/Вхід</button></li>
            <li><button id="bug-report-btn" class="sidebar-link"><i class="fas fa-exclamation-circle"></i> Повідомити про помилку</button></li>
            <li><button id="privacy-policy-btn" class="sidebar-link"><i class="fas fa-shield-alt"></i> Політика конфіденційності</button></li>
        </ul>
    </nav>
</div>

<div id="agent-mode-modal" class="modal-backdrop">
    <div class="modal-content max-w-md">
        <div class="modal-header">
            <h3 class="text-xl font-bold text-[#281822]"><i class="fas fa-briefcase mr-2"></i> Кабінет турагента</h3>
            <button class="modal-close-btn">&times;</button>
        </div>
        <div class="modal-body space-y-3">
            <a href="agency_register.html" id="agent-btn-register" class="w-full text-left p-3 rounded-lg border border-gray-200 hover:bg-gray-50 hover:border-[#48192E] transition flex items-center gap-3 group text-decoration-none">
                <div class="bg-[#48192E] text-white w-10 h-10 rounded-lg flex items-center justify-center shrink-0 group-hover:scale-110 transition"><i class="fas fa-plus"></i></div>
                <div>
                    <div class="font-bold text-[#281822]">Зареєструвати агенцію</div>
                    <div class="text-xs text-gray-500">Створити новий бізнес-акаунт</div>
                </div>
            </a>
            <button id="agent-btn-account" class="w-full text-left p-3 rounded-lg border border-gray-200 hover:bg-gray-50 hover:border-[#2D4952] transition flex items-center gap-3 group">
                <div class="bg-[#2D4952] text-white w-10 h-10 rounded-lg flex items-center justify-center shrink-0 group-hover:scale-110 transition"><i class="fas fa-user-cog"></i></div>
                <div>
                    <div class="font-bold text-[#281822]">Акаунт та налаштування</div>
                    <div class="text-xs text-gray-500">Керування профілем агенції</div>
                </div>
            </button>
            <button id="agent-btn-add-tour" class="w-full text-left p-3 rounded-lg border border-gray-200 hover:bg-gray-50 hover:border-[#48192E] transition flex items-center gap-3 group">
                <div class="bg-white border-2 border-[#48192E] text-[#48192E] w-10 h-10 rounded-lg flex items-center justify-center shrink-0 group-hover:bg-[#48192E] group-hover:text-white transition"><i class="fas fa-plane"></i></div>
                <div>
                    <div class="font-bold text-[#281822]">Додати тур</div>
                    <div class="text-xs text-gray-500"><span class="text-[#48192E] font-bold">Платна послуга</span> • Просувайте свої тури</div>
                </div>
            </button>
            <button id="agent-btn-add-magnet" class="w-full text-left p-3 rounded-lg border border-gray-200 hover:bg-gray-50 hover:border-[#2D4952] transition flex items-center gap-3 group">
                <div class="bg-white border-2 border-[#2D4952] text-[#2D4952] w-10 h-10 rounded-lg flex items-center justify-center shrink-0 group-hover:bg-[#2D4952] group-hover:text-white transition"><i class="fas fa-magnet"></i></div>
                <div>
                    <div class="font-bold text-[#281822]">Додати магніт</div>
                    <div class="text-xs text-gray-500">Створити власний або замовити дизайн</div>
                </div>
            </button>
            <button id="agent-btn-add-post" class="w-full text-left p-3 rounded-lg border border-gray-200 hover:bg-gray-50 hover:border-[#48192E] transition flex items-center gap-3 group">
                <div class="bg-gray-100 text-[#281822] w-10 h-10 rounded-lg flex items-center justify-center shrink-0 group-hover:bg-gray-200 transition"><i class="fas fa-pen"></i></div>
                <div>
                    <div class="font-bold text-[#281822]">Додати пост</div>
                    <div class="text-xs text-gray-500">Поділіться новинами в блозі</div>
                </div>
            </button>
        </div>
    </div>
</div>

<div id="modal-agent-register" class="modal-backdrop">
    <div class="modal-content max-w-md">
        <div class="modal-header">
            <h3 class="text-xl font-bold text-[#281822]">Реєстрація агенції</h3>
            <button class="modal-close-btn">&times;</button>
        </div>
        <div class="modal-body space-y-4">
            <div>
                <label class="block text-sm font-medium mb-1 text-[#281822]">Назва агенції</label>
                <input type="text" placeholder="Travel Company LLC" class="w-full border p-2 rounded-md">
            </div>
            <div>
                <label class="block text-sm font-medium mb-1 text-[#281822]">Номер ліцензії</label>
                <input type="text" placeholder="№ 12345678" class="w-full border p-2 rounded-md">
            </div>
            <div>
                <label class="block text-sm font-medium mb-1 text-[#281822]">Контактний телефон</label>
                <input type="tel" placeholder="+380..." class="w-full border p-2 rounded-md">
            </div>
            <div>
                <label class="block text-sm font-medium mb-1 text-[#281822]">Веб-сайт (опціонально)</label>
                <input type="url" placeholder="https://" class="w-full border p-2 rounded-md">
            </div>
            <button class="btn-solid w-full">Зареєструвати</button>
        </div>
    </div>
</div>

<div id="modal-agent-account" class="modal-backdrop">
    <div class="modal-content max-w-md">
        <div class="modal-header">
            <h3 class="text-xl font-bold text-[#281822]">Налаштування агенції</h3>
            <button class="modal-close-btn">&times;</button>
        </div>
        <div class="modal-body space-y-4">
            <div class="flex items-center gap-4">
                <div class="w-16 h-16 bg-gray-200 rounded-lg flex items-center justify-center text-2xl text-gray-400"><i class="fas fa-building"></i></div>
                <button class="text-[#48192E] text-sm border border-[#48192E] px-3 py-1 rounded hover:bg-gray-50">Змінити лого</button>
            </div>
            <div>
                <label class="block text-sm font-medium mb-1 text-[#281822]">Опис профілю</label>
                <textarea rows="3" placeholder="Розкажіть про вашу агенцію..." class="w-full border p-2 rounded-md"></textarea>
            </div>
            <div class="pt-2 border-t mt-4">
                <button class="w-full text-left py-2 text-[#281822] hover:text-[#48192E] flex justify-between">
                    Статистика переглядів <i class="fas fa-chevron-right text-gray-400"></i>
                </button>
                <button class="w-full text-left py-2 text-[#281822] hover:text-[#48192E] flex justify-between">
                    Історія платежів <i class="fas fa-chevron-right text-gray-400"></i>
                </button>
            </div>
            <button class="btn-solid w-full mt-2">Зберегти зміни</button>
        </div>
    </div>
</div>

<div id="modal-agent-add-tour" class="modal-backdrop">
    <div class="modal-content max-w-lg">
        <div class="modal-header">
            <h3 class="text-xl font-bold text-[#281822]">Додати новий тур</h3>
            <button class="modal-close-btn">&times;</button>
        </div>

        <form id="form-add-tour" class="modal-body space-y-4">
            <div>
                <label class="block text-sm font-medium mb-1 text-[#281822]">Назва туру</label>
                <input type="text" name="title" required placeholder="Напр: Вікенд у Парижі" class="w-full border p-2 rounded-md outline-none focus:border-[#48192E]">
            </div>

            <div class="grid grid-cols-2 gap-4">
                <div>
                    <label class="block text-sm font-medium mb-1 text-[#281822]">Ціна (грн)</label>
                    <input type="number" name="price" required min="1" class="w-full border p-2 rounded-md outline-none focus:border-[#48192E]">
                </div>
                <div>
                    <label class="block text-sm font-medium mb-1 text-[#281822]">Тривалість (днів)</label>
                    <input type="number" name="duration" required min="1" placeholder="7" class="w-full border p-2 rounded-md outline-none focus:border-[#48192E]">
                </div>
            </div>

            <div>
                <label class="block text-sm font-medium mb-1 text-[#281822]">Локація</label>
                <input type="text" name="location" required placeholder="Країна, Місто" class="w-full border p-2 rounded-md outline-none focus:border-[#48192E]">
            </div>

            <div>
                <label class="block text-sm font-medium mb-1 text-[#281822]">Категорія</label>
                <select name="category_id" class="w-full border p-2 rounded-md bg-white outline-none focus:border-[#48192E]">
                    <option value="1">Пляжний відпочинок</option>
                    <option value="2">Гірський туризм</option>
                    <option value="3">Міський туризм</option>
                    <option value="4">Екскурсійні тури</option>
                    <option value="5">Активний відпочинок</option>
                </select>
            </div>

            <div>
                <label class="block text-sm font-medium mb-1 text-[#281822]">Опис</label>
                <textarea name="description" rows="4" required class="w-full border p-2 rounded-md outline-none focus:border-[#48192E]"></textarea>
            </div>

            <div>
                <label class="block text-sm font-medium mb-1 text-[#281822]">Фото туру (можна декілька)</label>
                <label class="border-2 border-dashed border-gray-300 rounded-md p-6 text-center text-gray-500 hover:bg-gray-50 cursor-pointer block relative">
                    <input type="file" name="images" multiple accept="image/*" class="absolute inset-0 w-full h-full opacity-0 cursor-pointer"
                           onchange="const count = this.files.length; document.getElementById('tour-file-name').innerText = count > 0 ? `Обрано файлів: ${count}` : 'Натисніть щоб завантажити фото'">
                    <i class="fas fa-cloud-upload-alt text-2xl mb-2"></i>
                    <p class="text-sm" id="tour-file-name">Натисніть щоб завантажити фото</p>
                </label>
            </div>

            <button type="submit" class="btn-solid w-full">Опублікувати тур</button>
        </form>
    </div>
</div>

<div id="modal-agent-add-magnet" class="modal-backdrop">
    <div class="modal-content max-w-lg">
        <div class="modal-header">
            <h3 class="text-xl font-bold text-[#281822]">Додати магніт</h3>
            <button class="modal-close-btn">&times;</button>
        </div>
        <div class="modal-body">

            <div id="magnet-step-select" class="space-y-6">
                <div class="text-center">
                    <button id="btn-choice-upload" class="w-full group">
                        <div class="bg-gray-100 w-16 h-16 rounded-full flex items-center justify-center mx-auto mb-3 text-[#48192E] text-2xl group-hover:bg-[#48192E] group-hover:text-white transition">
                            <i class="fas fa-upload"></i>
                        </div>
                        <h4 class="font-bold mb-1 text-[#281822]">Завантажити свій дизайн</h4>
                        <p class="text-sm text-gray-500">Якщо у вас вже є готове зображення (PNG/JPG)</p>
                    </button>
                </div>

                <div class="relative flex py-2 items-center">
                    <div class="flex-grow border-t border-gray-300"></div>
                    <span class="flex-shrink-0 mx-4 text-gray-400 text-sm">АБО</span>
                    <div class="flex-grow border-t border-gray-300"></div>
                </div>

                <div class="text-center">
                    <button id="btn-choice-request" class="w-full group">
                        <div class="bg-gray-100 w-16 h-16 rounded-full flex items-center justify-center mx-auto mb-3 text-[#2D4952] text-2xl group-hover:bg-[#2D4952] group-hover:text-white transition">
                            <i class="fas fa-paint-brush"></i>
                        </div>
                        <h4 class="font-bold mb-1 text-[#281822]">Замовити дизайн</h4>
                        <p class="text-sm text-gray-500">Наші дизайнери створять унікальний магніт для вас</p>
                    </button>
                </div>
            </div>

            <form id="form-magnet-upload" class="hidden space-y-4">
                <button type="button" class="btn-back-step text-sm text-gray-500 hover:text-[#281822] mb-2"><i class="fas fa-arrow-left"></i> Назад</button>

                <div>
                    <label class="block text-sm font-medium mb-2 text-[#281822]">1. Завантажте зображення</label>
                    <div class="border-2 border-dashed border-gray-300 rounded-lg p-6 text-center hover:bg-gray-50 transition cursor-pointer relative">
                        <input type="file" id="magnet-file-input" accept="image/*" class="absolute inset-0 w-full h-full opacity-0 cursor-pointer">
                        <div id="magnet-preview-area">
                            <i class="fas fa-cloud-upload-alt text-3xl text-gray-400 mb-2"></i>
                            <p class="text-sm text-gray-500">Натисніть або перетягніть файл сюди</p>
                        </div>
                        <img id="magnet-preview-img" class="hidden max-h-32 mx-auto rounded shadow-sm object-contain">
                    </div>
                </div>

                <div class="grid grid-cols-2 gap-4">
                    <div>
                        <label class="block text-sm font-medium mb-1 text-[#281822]">Країна</label>
                        <input type="text" id="magnet-country" class="w-full border p-2 rounded-md outline-none focus:border-[#48192E]" required placeholder="Україна">
                    </div>
                    <div>
                        <label class="block text-sm font-medium mb-1 text-[#281822]">Місто</label>
                        <input type="text" id="magnet-city" class="w-full border p-2 rounded-md outline-none focus:border-[#48192E]" required placeholder="Київ">
                    </div>
                </div>

                <div>
                    <label class="block text-sm font-medium mb-2 text-[#281822]">2. Оберіть форму магніту</label>
                    <div class="grid grid-cols-3 gap-3">
                        <label class="cursor-pointer">
                            <input type="radio" name="magnet_shape" value="square" class="peer hidden" checked>
                            <div class="border rounded-lg p-3 text-center peer-checked:border-[#48192E] peer-checked:bg-[#48192E]/5 hover:bg-gray-50">
                                <div class="w-8 h-8 bg-gray-300 mx-auto mb-1 rounded-sm"></div>
                                <span class="text-xs">Квадрат</span>
                            </div>
                        </label>
                        <label class="cursor-pointer">
                            <input type="radio" name="magnet_shape" value="circle" class="peer hidden">
                            <div class="border rounded-lg p-3 text-center peer-checked:border-[#48192E] peer-checked:bg-[#48192E]/5 hover:bg-gray-50">
                                <div class="w-8 h-8 bg-gray-300 mx-auto mb-1 rounded-full"></div>
                                <span class="text-xs">Коло</span>
                            </div>
                        </label>
                        <label class="cursor-pointer">
                            <input type="radio" name="magnet_shape" value="rectangle" class="peer hidden">
                            <div class="border rounded-lg p-3 text-center peer-checked:border-[#48192E] peer-checked:bg-[#48192E]/5 hover:bg-gray-50">
                                <div class="w-10 h-6 bg-gray-300 mx-auto mb-2 mt-1 rounded-sm"></div>
                                <span class="text-xs">Прямокутник</span>
                            </div>
                        </label>
                    </div>
                </div>

                <button type="submit" class="btn-solid w-full">Створити магніт</button>
            </form>

            <form id="form-magnet-request" class="hidden space-y-4">
                <button type="button" class="btn-back-step text-sm text-gray-500 hover:text-[#281822] mb-2"><i class="fas fa-arrow-left"></i> Назад</button>

                <div class="bg-blue-50 p-4 rounded-lg flex gap-3 items-start">
                    <i class="fas fa-info-circle text-[#2D4952] mt-1"></i>
                    <p class="text-sm text-[#2D4952]">Опишіть ваше побажання, і наш дизайнер зв'яжеться з вами для уточнення деталей та вартості.</p>
                </div>

                <div>
                    <label class="block text-sm font-medium mb-1 text-[#281822]">Ваші побажання</label>
                    <textarea id="magnet-request-text" rows="4" placeholder="Наприклад: Магніт з видом на Карпати, логотип агенції в кутку..." class="w-full border p-2 rounded-md outline-none focus:border-[#2D4952]"></textarea>
                </div>

                <button type="submit" class="w-full border border-[#2D4952] bg-[#2D4952] text-white py-2 rounded-lg font-bold hover:bg-[#1a2e33]">Надіслати запит</button>
            </form>

        </div>
    </div>
</div>

<div id="modal-agent-add-post" class="modal-backdrop">
    <div class="modal-content max-w-lg">
        <div class="modal-header">
            <h3 class="text-xl font-bold text-[#281822]">Створити пост</h3>
            <button class="modal-close-btn">&times;</button>
        </div>
        <div class="modal-body space-y-4">
            <div>
                <label class="block text-sm font-medium mb-1 text-[#281822]">Заголовок</label>
                <input type="text" placeholder="Про що ви хочете розповісти?" class="w-full border p-2 rounded-md">
            </div>
            <div>
                <label class="block text-sm font-medium mb-1 text-[#281822]">Категорія</label>
                <select class="w-full border p-2 rounded-md bg-white">
                    <option>Новини агенції</option>
                    <option>Гарячі пропозиції</option>
                    <option>Поради туристам</option>
                </select>
            </div>
            <div>
                <label class="block text-sm font-medium mb-1 text-[#281822]">Текст</label>
                <textarea rows="5" class="w-full border p-2 rounded-md"></textarea>
            </div>
            <div class="flex gap-2">
                <button class="border border-gray-300 p-2 rounded-md hover:bg-gray-50"><i class="far fa-image"></i> Фото</button>
                <button class="border border-gray-300 p-2 rounded-md hover:bg-gray-50"><i class="fas fa-map-marker-alt"></i> Локація</button>
            </div>
            <button class="btn-solid w-full">Опублікувати</button>
        </div>
    </div>
</div>

<div id="privacy-modal" class="modal-backdrop">
    <div class="modal-content max-w-2xl h-[80vh] flex flex-col">
        <div class="modal-header shrink-0">
            <h3 class="text-xl font-bold text-[#281822]">Політика конфіденційності</h3>
            <button class="modal-close-btn">&times;</button>
        </div>
        <div class="modal-body overflow-y-auto text-sm text-gray-700 leading-relaxed space-y-4 p-6">
            <p><strong>Останнє оновлення: 8 грудня 2025 року</strong></p>

            <h4 class="font-bold text-[#281822] text-lg">1. Загальні положення</h4>
            <p>Ця Політика конфіденційності описує, як FridgeTrotter («Ми», «Нас» або «Наш») збирає, використовує та розкриває вашу інформацію у зв'язку з використанням вами нашого веб-сайту. Реєструючись на сайті, ви погоджуєтесь з умовами цієї політики.</p>

            <h4 class="font-bold text-[#281822] text-lg">2. Збір інформації</h4>
            <p>Ми збираємо наступні типи інформації:</p>
            <ul class="list-disc pl-5 space-y-1">
                <li><strong>Персональні дані:</strong> Ім'я, прізвище, адреса електронної пошти, дата народження, які ви надаєте під час реєстрації.</li>
                <li><strong>Дані профілю:</strong> Інформація про ваші подорожі, відвідані країни, фотографії та біографія.</li>
                <li><strong>Технічні дані:</strong> IP-адреса, тип браузера, дані про пристрій.</li>
            </ul>

            <h4 class="font-bold text-[#281822] text-lg">3. Використання інформації</h4>
            <p>Ми використовуємо ваші дані для:</p>
            <ul class="list-disc pl-5 space-y-1">
                <li>Надання послуг платформи (створення магнітів, пошук компаньйонів).</li>
                <li>Персоналізації вашого досвіду користування.</li>
                <li>Надсилання важливих сповіщень та оновлень.</li>
                <li>Забезпечення безпеки акаунту.</li>
            </ul>

            <h4 class="font-bold text-[#281822] text-lg">4. Захист даних</h4>
            <p>Ми вживаємо належних заходів безпеки для захисту від несанкціонованого доступу, зміни, розкриття або знищення ваших персональних даних. Паролі зберігаються у зашифрованому вигляді.</p>

            <h4 class="font-bold text-[#281822] text-lg">5. Розкриття інформації третім сторонам</h4>
            <p>Ми не продаємо і не передаємо ваші персональні дані третім сторонам, за винятком випадків, передбачених законодавством України, або для забезпечення функціонування сервісу (хостинг, технічна підтримка).</p>

            <h4 class="font-bold text-[#281822] text-lg">6. Ваші права</h4>
            <p>Ви маєте право:</p>
            <ul class="list-disc pl-5 space-y-1">
                <li>Отримувати доступ до своїх даних.</li>
                <li>Вимагати виправлення неточних даних.</li>
                <li>Вимагати видалення свого акаунту та всіх пов'язаних даних.</li>
            </ul>

            <h4 class="font-bold text-[#281822] text-lg">7. Контакти</h4>
            <p>Якщо у вас виникли запитання щодо цієї Політики, зв'яжіться з нами через форму підтримки або напишіть на email: privacy@fridgetrotter.com.</p>
        </div>
    </div>
</div>

<div id="bug-report-modal" class="modal-backdrop">
    <div class="modal-content">
        <div class="modal-header">
            <h3 class="text-xl font-bold text-[#281822]">Повідомити про помилку</h3>
            <button class="modal-close-btn">&times;</button>
        </div>
        <div class="modal-body space-y-4">
            <textarea class="w-full border p-2 rounded-md h-32" placeholder="Опишіть проблему..."></textarea>
            <button class="btn-solid w-full">Надіслати</button>
        </div>
    </div>
</div>

<div id="notifications-modal" class="modal-backdrop">
    <div class="modal-content notification-modal-content">
        <div class="modal-header">
            <h3 class="text-xl font-bold text-[#281822]">
                <i class="far fa-bell mr-2"></i> Сповіщення
            </h3>
            <button class="modal-close-btn">&times;</button>
        </div>

        <div class="modal-body p-0">
            <div id="notifications-list" class="notifications-list">
                <div class="p-4 text-center text-gray-500">
                    <i class="fas fa-spinner fa-spin"></i> Завантаження...
                </div>
            </div>
        </div>

        <div class="modal-footer border-t border-gray-100 p-3 text-center bg-gray-50 rounded-b-xl">
            <button id="mark-all-read-btn" class="text-sm text-[#2D4952] font-semibold hover:text-[#48192E]">
                Позначити всі як прочитані
            </button>
        </div>
    </div>
</div>

<div id="chat-window" class="chat-window">
    <div class="chat-header">
        <span class="font-bold">Чат</span>
        <button id="chat-close-btn" class="text-white hover:text-gray-300"><i class="fas fa-times"></i></button>
    </div>
    <div class="chat-body" id="chat-body">
        <div class="message-bubble other">Привіт! Як справи?</div>
    </div>
    <div class="chat-footer">
        <input type="text" placeholder="Напишіть повідомлення..." class="flex-1 border p-2 rounded-md text-sm outline-none">
        <button class="bg-[#48192E] text-white p-2 rounded-md"><i class="fas fa-paper-plane"></i></button>
    </div>
</div>